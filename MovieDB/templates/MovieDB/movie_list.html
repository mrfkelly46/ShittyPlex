
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<style>
.center {
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
}
.bold {
    font-weight:bold;
    text-decoration: underline;
}

input[type=text] {
    width: 40%;
}

a:link, a:visited {
    color: blue;
}
</style>
</head>

<div align="center">
    <a href="{% url 'movie_list' %}"><h1>Shitty Movie DB</h1></a>
</div>

<div>
    <form method="get" id="search">
        Filters:
        <input type="text" name="filters" placeholder="Filter by title, or as <field>:<term> e.g. actors:tom cruise (multiple filters seperated by ', ')">
 
        <br>

        Order by:
        <select name="order1Asc">
            <option></option>
            <option value="">Asc</option>
            <option value="-">Desc</option>
        </select>
        <select name="order1">
            <option></option>
            <option value="movie_title">Title</option>
            <option value="movie_year">Year</option>
            <option value="movie_runtime">Runtime</option>
            <option value="movie_imdbrating">IMDB Rating</option>
            <option value="movie_added">Date Added</option>
            <option value="?">Random</option>
        </select>
        <select name="order2Asc">
            <option></option>
            <option value="">Asc</option>
            <option value="-">Desc</option>
        </select>
        <select name="order2">
            <option></option>
            <option value="movie_year">Year</option>
            <option value="movie_title">Title</option>
            <option value="movie_runtime">Runtime</option>
            <option value="movie_imdbrating">IMDB Rating</option>
            <option value="movie_added">Date Added</option>
            <option value="?">Random</option>
        </select>
        
        <br>

        <input type="submit" value="Search">
    </form>
</div>

{{ numResults }} results

{% if isMobile %}

<table>
    {% for movie in movies %}
        <tr>
            <td style="background-color:#c9c9c9"></td>
            <td style="background-color:#c9c9c9"></td>
        </tr>
        <tr>
            <td>
                <a href='https://www.imdb.com/title/{{ movie.movie_imdbid }}'><img src="{{ movie.movie_poster }}" class="center"></img></a>
            </td>
        </tr>
        <tr>
            <td>
                <ul>
                    <li><span class="bold">Title:</span> <a href='https://www.imdb.com/title/{{ movie.movie_imdbid }}'>{{ movie.movie_title }}</a></li>
                    <li><span class="bold">Year:</span> {{ movie.movie_year }}</li>
                    <li><span class="bold">Genre:</span> {{ movie.movie_genre }}</li>
                    <li><span class="bold">IMDB Rating:</span> {{ movie.movie_imdbrating }}</li>
                    <li><span class="bold">Runtime:</span> {{ movie.movie_runtime }} min</li>
                    <li><span class="bold">Director:</span> {{ movie.movie_director }}</li>
                    <li><span class="bold">Writer:</span> {{ movie.movie_writer }}</li>
                    <li><span class="bold">Actors:</span> {{ movie.movie_actors }}</li>
                    <li><span class="bold">Plot:</span> {{ movie.movie_plot }}</li>
                    <li><span class="bold">Rated:</span> {{ movie.movie_rated }}</li>
                    <li><span class="bold">Released:</span> {{ movie.movie_released }}</li>
                </ul>
            </td>
        </tr>
    {% endfor %}
</table>

{% else %}

<table>
    {% for movie in movies %}
        <tr>
            <td style="background-color:#c9c9c9"></td>
            <td style="background-color:#c9c9c9"></td>
        </tr>
        <tr>
            <td>
                <a href='https://www.imdb.com/title/{{ movie.movie_imdbid }}'><img src="{{ movie.movie_poster }}"></img></a>
            </td>
            <td>
                <ul>
                    <li><span class="bold">Title:</span> <a href='https://www.imdb.com/title/{{ movie.movie_imdbid }}'>{{ movie.movie_title }}</a></li><br>
                    <li><span class="bold">Year:</span> {{ movie.movie_year }}</li><br>
                    <li><span class="bold">Genre:</span> {{ movie.movie_genre }}</li><br>
                    <li><span class="bold">IMDB Rating:</span> {{ movie.movie_imdbrating }}</li><br>
                    <li><span class="bold">Runtime:</span> {{ movie.movie_runtime }} min</li><br>
                    <li><span class="bold">Director:</span> {{ movie.movie_director }}</li><br>
                    <li><span class="bold">Writer:</span> {{ movie.movie_writer }}</li><br>
                    <li><span class="bold">Actors:</span> {{ movie.movie_actors }}</li><br>
                    <li><span class="bold">Plot:</span> {{ movie.movie_plot }}</li><br>
                    <li><span class="bold">Rated:</span> {{ movie.movie_rated }}</li><br>
                    <li><span class="bold">Released:</span> {{ movie.movie_released }}</li><br>
                    {% if ".mp4" in movie.filepath %}
                    <li><span class="bold">Stream MP4:</span> <a href='file://PI-LANTIR\PiShare - Public\Movies\{{ movie.filepath }}'>{{ movie.filepath }}</a>
                    {% endif %}
                </ul>
            </td>
        <tr>
    {% endfor %}
</table>

{% endif %}

<script>
jQuery(document).ready(function($){
  
  // Remove empty fields from GET forms
  // Author: Bill Erickson
  // URL: http://www.billerickson.net/code/hide-empty-fields-get-form/
  
    // Change 'form' to class or ID of your specific form
    $('#search').submit(function() {
        $(this).find(":input").filter(function(){ return !this.value; }).attr("disabled", "disabled");
        return true; // ensure form still submits
    });
    
    // Un-disable form fields when page loads, in case they click back after submission
    $( '#search' ).find( ":input" ).prop( "disabled", false );
    
});
</script>
